{% extends 'base.html.twig' %}

{% block title %}DCSM-COMMERCE - Investissement crypto avec gains récurrents
{% endblock %}

{% block body %}
	<!-- Navigation -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
		<div class="container">
			<a class="navbar-brand" href="{{ path('app_dashboard') }}">
				<i class="fas fa-coins me-2"></i>DCSM-COMMERCE
			</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav ms-auto">
					<li class="nav-item">
						<a class="nav-link active" href="{{ path('app_dashboard') }}">Accueil</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_products_index') }}">Produits</a>
					</li>
					{% if app.user %}
						<li class="nav-item">
							<a class="nav-link" href="{{ path('app_profile') }}">Mon Profil</a>
						</li>
					{% endif %}
				</ul>
				<div class="ms-lg-3 mt-3 mt-lg-0">
					{% if app.user %}
						<a href="{{ path('app_profile') }}" class="btn btn-outline-light me-2">Mon compte</a>
						<a href="{{ path('app_logout') }}" class="btn btn-primary">Déconnexion</a>
					{% else %}
						<a href="{{ path('app_login') }}" class="btn btn-outline-light me-2">Connexion</a>
						<a href="{{ path('app_register') }}" class="btn btn-primary">S'inscrire</a>
					{% endif %}
				</div>
			</div>
		</div>
	</nav>

	<!-- Hero Section -->
	<section class="hero-section bg-primary text-white py-5">
		<div class="container py-4">
			<div class="row align-items-center">
				<div class="col-lg-6">
					<h1 class="display-4 fw-bold mb-4">Gagnez
						<span class="text-warning">4%</span>
						sur vos produits</h1>
					<p class="lead mb-4">Chaque produit acheté vous rapporte automatiquement 4% de sa valeur actuelle quotidiennement.</p>
					<div class="d-flex flex-wrap gap-3">
						{% if app.user %}
							<a href="{{ path('app_products_index') }}" class="btn btn-light btn-lg px-4">Voir les produits</a>
						{% else %}
							<a href="{{ path('app_register') }}" class="btn btn-light btn-lg px-4">Commencer à 4%</a>
						{% endif %}
						<a href="#how-it-works" class="btn btn-outline-light btn-lg px-4">
							<i class="fas fa-play me-2"></i>Comment ça marche
						</a>
					</div>
				</div>
				<div class="col-lg-6 d-none d-lg-block">
					<img src="{{ asset('build/images/crypto-dashboard.png') }}" alt="Dashboard crypto" class="img-fluid">
				</div>
			</div>
		</div>
	</section>

	<!-- User Stats Section -->
	{% if app.user %}
		<section class="py-4 bg-light">
			<div class="container">
				<div class="row g-3">
					<div class="col-md-3">
						<div class="stats-card bg-white p-3 rounded text-center">
							<i class="fas fa-boxes text-primary mb-2 fs-4"></i>
							<div class="stats-number fs-3 fw-bold">
								{{ app.user.Product|length }}
							</div>
							<div class="stats-label text-muted">Produits achetés</div>
						</div>
					</div>
					<div class="col-md-3">
						<div class="stats-card bg-white p-3 rounded text-center">
							<i class="fas fa-coins text-primary mb-2 fs-4"></i>
							<div class="stats-number fs-3 fw-bold">
								{{ app.user.balance|default(0)|format_currency('USD') }}
							</div>
							<div class="stats-label text-muted">Solde actuel</div>
						</div>
					</div>
					<div class="col-md-3">
						<div class="stats-card bg-white p-3 rounded text-center">
							<i class="fas fa-percentage text-primary mb-2 fs-4"></i>
							<div class="stats-number fs-3 fw-bold">4%</div>
							<div class="stats-label text-muted">Taux actuel</div>
						</div>
					</div>
					<div class="col-md-3">
						<div class="stats-card bg-white p-3 rounded text-center">
							<i class="fas fa-money-bill-wave text-primary mb-2 fs-4"></i>
							<div class="stats-number fs-3 fw-bold">
								{{ (app.user.balance|default(0) * 0.04)|format_currency('USD') }}
							</div>
							<div class="stats-label text-muted">Gains quotidiens</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	{% endif %}

	<!-- How It Works Section -->
	<section id="how-it-works" class="py-5">
		<div class="container py-4">
			<div class="text-center mb-5">
				<h2 class="fw-bold">Comment fonctionnent vos 4% ?</h2>
				<p class="lead text-muted">Un système simple et transparent</p>
			</div>
			<div class="row g-4">
				<div class="col-md-4">
					<div class="feature-card bg-white p-4 rounded shadow-sm h-100">
						<div class="feature-icon text-primary mb-3 fs-2">
							<i class="fas fa-shopping-cart"></i>
						</div>
						<h3 class="fw-bold">1. Achetez des produits</h3>
						<p>Choisissez parmi notre sélection de produits d'investissement crypto.</p>
					</div>
				</div>
				<div class="col-md-4">
					<div class="feature-card bg-white p-4 rounded shadow-sm h-100">
						<div class="feature-icon text-primary mb-3 fs-2">
							<i class="fas fa-chart-line"></i>
						</div>
						<h3 class="fw-bold">2. Recevez vos 4%</h3>
						<p>Chaque jour, vous gagnez 4% de la valeur actuelle de chaque produit.</p>
					</div>
				</div>
				<div class="col-md-4">
					<div class="feature-card bg-white p-4 rounded shadow-sm h-100">
						<div class="feature-icon text-primary mb-3 fs-2">
							<i class="fas fa-wallet"></i>
						</div>
						<h3 class="fw-bold">3. Retirez vos gains</h3>
						<p>Retirez vos gains à tout moment sur votre compte bancaire ou portefeuille crypto.</p>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Products Section -->
	<section class="py-5 bg-light">
		<div class="container py-4">
			<div class="text-center mb-5">
				<h2 class="fw-bold">Nos produits populaires</h2>
				<p class="lead text-muted">Tous génèrent 4% de rendement quotidien</p>
			</div>
			<div class="row g-4">
				{% for product in products|slice(0, 6) %}
					<div class="col-lg-4 col-md-6">
						<div class="card h-100 product-card shadow-sm">
							{% if date(product.created_at) > date('-30days') %}
								<span class="badge bg-success position-absolute top-0 start-0 m-2">Nouveau</span>
							{% endif %}

							<div class="product-img-container" style="height: 200px;">
								<img src="{{ asset('uploads/' ~ product.image) }}" class="card-img-top h-100 w-100 object-fit-cover" alt="{{ product.name }}" loading="lazy">
							</div>

							<div class="card-body">
								<h3 class="card-title fw-bold">{{ product.name }}</h3>
								<div class="d-flex justify-content-between align-items-center mb-3">
									<span class="h4 text-primary">{{ product.price|format_currency('USD') }}</span>
									<span class="badge bg-warning text-dark">4% quotidien</span>
								</div>
								<p class="card-text text-muted">{{ product.description|slice(0, 100) ~ '...' }}</p>
							</div>

							<div class="card-footer bg-white border-top-0">
								<div class="d-grid gap-2">
									<a href="{{ path('app_shop', {slug: product.shop.slug}) }}" class="btn btn-primary">
										<i class="fas fa-info-circle me-2"></i>Détails
									</a>
									{% if app.user %}
										<a href="{{ path('app_products_index') }}" class="btn btn-success">
											<i class="fas fa-shopping-cart me-2"></i>Acheter
										</a>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
				{% else %}
					<div class="col-12">
						<div class="alert alert-info text-center">
							Aucun produit disponible pour le moment.
						</div>
					</div>
				{% endfor %}
			</div>

			{% if products|length > 6 %}
				<div class="text-center mt-5">
					<a href="{{ path('app_products_index') }}" class="btn btn-outline-primary btn-lg px-5">
						Voir tous les produits ({{ products|length }})
					</a>
				</div>
			{% endif %}
		</div>
	</section>

	<!-- Testimonials -->
	<section class="py-5 bg-light">
		<div class="container py-4">
			<div class="text-center mb-5">
				<h2 class="fw-bold">Ils utilisent DCSM-COMMERCE</h2>
				<p class="lead text-muted">Ce que nos utilisateurs disent de nous</p>
			</div>
			<div class="row g-4">
				{% set testimonials = [
          {name: 'Daniel W.', avatar: 'default1.jpg', content: 'Je gagne environ $200 par jour grâce à mes investissements. La plateforme est fiable et les retraits sont rapides.', rating: 5},
          {name: 'Chris L.', avatar: 'default2.jpg', content: 'Excellent service client. J\'ai pu multiplier mon capital initial par 5 en quelques mois.', rating: 4},
          {name: 'Fabrice G.', avatar: 'default3.jpg', content: 'Simple d\'utilisation et très rentable. Je recommande à tous ceux qui veulent des revenus passifs.', rating: 5}
        ] %}

				{% for testimonial in testimonials %}
					<div class="col-md-4">
						<div class="testimonial-card bg-white p-4 rounded shadow-sm h-100">
							<div class="d-flex align-items-center mb-3">
								<img src="{{ asset('users/img/' ~ testimonial.avatar) }}" class="rounded-circle me-3" width="50" alt="{{ testimonial.name }}">
								<div>
									<h5 class="mb-0">{{ testimonial.name }}</h5>
									<small class="text-muted">Utilisateur vérifié</small>
								</div>
							</div>
							<p class="mb-0">"{{ testimonial.content }}"</p>
							<div class="mt-3 text-warning">
								{% for i in 1..5 %}
									{% if i <= testimonial.rating %}
										<i class="fas fa-star"></i>
									{% else %}
										<i class="far fa-star"></i>
									{% endif %}
								{% endfor %}
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
	</section>

	<!-- CTA Section -->
	<section class="py-5 bg-primary text-white">
		<div class="container py-4 text-center">
			<h2 class="fw-bold mb-4">Prêt à générer des revenus passifs ?</h2>
			<p class="lead mb-5">Commencez avec 4% de rendement quotidien sur vos investissements.</p>
			{% if app.user %}
				<a href="{{ path('app_products_index') }}" class="btn btn-light btn-lg px-5 me-3">
					<i class="fas fa-box-open me-2"></i>Investir maintenant
				</a>
			{% else %}
				<a href="{{ path('app_register') }}" class="btn btn-light btn-lg px-5 me-3">
					<i class="fas fa-user-plus me-2"></i>S'inscrire gratuitement
				</a>
			{% endif %}
			<a href="{{ path('app_profile') }}" class="btn btn-outline-light btn-lg px-5">
				<i class="fas fa-question-circle me-2"></i>Questions ?
			</a>
		</div>
	</section>

	<!-- Footer -->
	<footer class="bg-dark text-white py-5">
		<div class="container">
			<div class="row">
				<div class="col-lg-4 mb-4 mb-lg-0">
					<h5 class="mb-4">
						<i class="fas fa-coins me-2"></i>DCSM-COMMERCE
					</h5>
					<p>La plateforme qui vous paye 4% sur vos investissements crypto quotidiennement.</p>
					<div class="social-icons mt-4">
						<a href="#" class="text-white me-3">
							<i class="fab fa-facebook-f"></i>
						</a>
						<a href="#" class="text-white me-3">
							<i class="fab fa-twitter"></i>
						</a>
						<a href="#" class="text-white me-3">
							<i class="fab fa-telegram"></i>
						</a>
						<a href="#" class="text-white">
							<i class="fab fa-instagram"></i>
						</a>
					</div>
				</div>
				<div class="col-lg-2 col-md-4 mb-4 mb-md-0">
					<h5 class="mb-4">Navigation</h5>
					<a href="{{ path('app_dashboard') }}" class="text-white-50 d-block mb-2">Accueil</a>
					<a href="{{ path('app_products_index') }}" class="text-white-50 d-block mb-2">Produits</a>
					<a href="{{ path('app_profile') }}" class="text-white-50 d-block mb-2">Mon compte</a>
				</div>
				<div class="col-lg-2 col-md-4 mb-4 mb-md-0">
					<h5 class="mb-4">Légal</h5>
					<a href="#" class="text-white-50 d-block mb-2">CGU</a>
					<a href="#" class="text-white-50 d-block mb-2">Confidentialité</a>
					<a href="#" class="text-white-50 d-block mb-2">Cookies</a>
				</div>
				<div class="col-lg-4">
					<h5 class="mb-4">Newsletter</h5>
					<p>Abonnez-vous pour recevoir nos conseils et offres spéciales.</p>
					<form class="mt-3">
						<div class="input-group mb-3">
							<input type="email" class="form-control" placeholder="Votre email">
							<button class="btn btn-primary" type="submit">S'abonner</button>
						</div>
					</form>
				</div>
			</div>
			<hr class="my-4 bg-secondary">
			<div class="row">
				<div class="col-md-6 text-center text-md-start">
					<p class="small mb-0">©
						{{ "now"|date("Y") }}
						DCSM-COMMERCE. Tous droits réservés.</p>
				</div>
				<div class="col-md-6 text-center text-md-end">
					<p class="small mb-0">
						<span class="text-muted">Paiements acceptés:</span>
						<span class="text-warning">Carte</span>,
						<span class="text-info">PayPal</span>,
						<span class="text-success">Crypto</span>
					</p>
				</div>
			</div>
		</div>
	</footer>
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<style>
		.product-card {
			transition: all 0.3s ease;
			border-radius: 10px;
			overflow: hidden;
		}
		.product-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
		}
		.product-img-container {
			background: #f8f9fa;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.object-fit-cover {
			object-fit: cover;
			object-position: center;
		}
	</style>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	 <script>
	  document.addEventListener('DOMContentLoaded', function() {
	    // Calculateur de gains
	    const calculateEarnings = () => {
	      const amount = parseFloat(document.getElementById('investmentAmount').value) || 0;
	      const rate = parseFloat(document.getElementById('earningRate').value);
	      
	      const daily = (amount * rate / 100).toFixed(2);
	      const monthly = (daily * 30).toFixed(2);
	      const yearly = (daily * 365).toFixed(2);
	      
	      document.getElementById('dailyEarnings').textContent = '$' + daily;
	      document.getElementById('monthlyEarnings').textContent = '$' + monthly;
	      document.getElementById('yearlyEarnings').textContent = '$' + yearly;
	    };
	    
	    if(document.getElementById('calculateBtn')) {
	      document.getElementById('calculateBtn').addEventListener('click', calculateEarnings);
	      document.getElementById('investmentAmount').addEventListener('input', calculateEarnings);
	      document.getElementById('earningRate').addEventListener('change', calculateEarnings);
	      calculateEarnings();
	    }
	
	    // Smooth scrolling
	    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
	      anchor.addEventListener('click', function(e) {
	        e.preventDefault();
	        document.querySelector(this.getAttribute('href')).scrollIntoView({
	          behavior: 'smooth'
	        });
	      });
	    });
	  });
	</script>
{% endblock %}
