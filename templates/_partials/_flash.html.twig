{% if app.user and app.user.isVerified == 0 %}
  <script>
    document.addEventListener('turbo:load', function () {
      Swal.fire({
        icon: 'warning',
        title: 'Compte inactif',
        html: `
                  Votre compte n'est pas activé. Veuillez vérifier votre boîte mail !
                  <div style="margin-top: 10px;">
                      <a href="{{ path('app_verify_email_send') }}" class="btn btn-light btn-sm">
                          <i class="fas fa-paper-plane me-2"></i>Renvoyer le lien
                      </a>
                  </div>
              `,
        showConfirmButton: false,
        toast: true,
        position: 'top-end',
        timer: 10000,
        timerProgressBar: true
      })
    })
  </script>
{% endif %}

{% for label, messages in app.flashes %}
  <script>
  document.addEventListener('turbo:load', function() {
      {% for message in messages %}
          // Déterminer le type d'alerte SweetAlert2
          let swalType = 'info';
          if (['success', 'info', 'warning', 'danger', 'error'].includes('{{ label }}')) {
              swalType = '{{ label }}' === 'error' ? 'error' : '{{ label }}';
          }
  
          // Afficher l'alerte SweetAlert2
          Swal.fire({
              icon: swalType,
              title: '{{ label|capitalize|replace({'_': ' '}) }}',
              text: `{{ message|raw }}`,
              timer: swalType === 'error' || swalType === 'warning' ? 8000 : 5000,
              showConfirmButton: false,
              toast: true,
              position: 'top-end',
              timerProgressBar: true
          });
      {% endfor %}
  });
  </script>
{% endfor %}

{% if app.request.query.get('error') %}
  <script>
  document.addEventListener('turbo:load', function() {
      Swal.fire({
          icon: 'error',
          title: 'Erreur',
          text: `{{ app.request.query.get('error')|raw }}`,
          timer: 8000,
          showConfirmButton: false,
          toast: true,
          position: 'top-end',
          timerProgressBar: true
      });
  });
  </script>
{% endif %}