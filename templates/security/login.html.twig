{% extends 'base.html.twig' %}

{% block title %}Connexion |
	{{ app_name }}
{% endblock %}

{% block body %}
	<div class="container-xxl">
		<div class="authentication-wrapper authentication-basic container-p-y">
			<div
				class="authentication-inner py-4">
				<!-- Logo + Title -->
				<div class="card p-2">
					<div class="app-brand justify-content-center mt-5">
						<a href="{{ path('app_home') }}" class="app-brand-link gap-2">
							<span
								class="app-brand-logo demo">
								{# Ins√©rez votre logo ici #}
								<svg width="32" height="22" viewbox="0 0 32 22" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" clip-rule="evenodd" d="..." fill="var(--primary)"/>
								</svg>
							</span>
							<span class="app-brand-text demo text-body fw-bold fs-3">{{ app_name }}</span>
						</a>
					</div>

					<!-- /Logo -->
					<div class="card-body mt-2">
						<h4 class="mb-4 text-center">Bienvenue sur
							{{ app_name }}! üëã</h4>
						<p class="mb-4 text-center">Veuillez vous connecter √† votre compte</p>

						{% if error %}
							<div class="alert alert-danger alert-dismissible" role="alert">
								{{ error.messageKey|trans(error.messageData, 'security') }}
								<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
							</div>
						{% endif %}

						<form id="formAuthentication" class="mb-3" method="post">
							<div class="mb-3">
								<label for="username" class="form-label">Email ou nom d'utilisateur</label>
								<input type="text" class="form-control" id="username" name="username" value="{{ last_username }}" placeholder="Entrez votre email ou nom d'utilisateur" autofocus required/>
							</div>
							<div class="mb-3 form-password-toggle">
								<div class="d-flex justify-content-between">
									<label class="form-label" for="password">Mot de passe</label>
									<a href="{{ path('app_forgot_password_request') }}">
										<small>Mot de passe oubli√© ?</small>
									</a>
								</div>
								<div class="input-group input-group-merge">
									<input type="password" id="password" class="form-control" name="password" placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;" aria-describedby="password" required/>
									<span class="input-group-text cursor-pointer">
										<i class="bx bx-hide"></i>
									</span>
								</div>
							</div>
							<div class="mb-3">
								<div class="form-check">
									<input class="form-check-input" type="checkbox" id="remember-me" name="_remember_me" checked/>
									<label class="form-check-label" for="remember-me">
										Se souvenir de moi
									</label>
								</div>
							</div>
							<input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}"/>

							<div class="mb-3">
								<button class="btn btn-primary d-grid w-100 waves-effect" type="submit">
									Se connecter
								</button>
							</div>
						</form>

						<!-- Social Auth -->
						<div class="divider my-4">
							<div class="divider-text">ou</div>
						</div>

						<div class="d-flex justify-content-center">
							<a href="{{ path('connect_google_start') }}" class="btn btn-icon btn-label-google me-3">
								<i class="tf-icons bx bxl-google"></i>
							</a>
							{# Ajoutez d'autres providers ici si n√©cessaire #}
						</div>

						<p class="text-center mt-3">
							<span>Nouveau sur notre plateforme ?</span>
							<a href="{{ path('app_register') }}">
								<span>Cr√©ez un compte</span>
							</a>
						</p>
					</div>
				</div>
				<!-- /Register -->
			</div>
		</div>
	</div>

	{# Ajout d'un script pour am√©liorer l'UX #}
	 <script>
	    document.addEventListener('DOMContentLoaded', function() {
	      // Animation douce au chargement
	      const card = document.querySelector('.authentication-inner');
	      card.style.opacity = '0';
	      card.style.transform = 'translateY(20px)';
	      card.style.transition = 'all 0.4s ease';
	      
	      setTimeout(() => {
	        card.style.opacity = '1';
	        card.style.transform = 'translateY(0)';
	      }, 100);
	
	      // Am√©lioration du toggle password
	      const passwordInput = document.getElementById('password');
	      const toggleBtn = document.querySelector('.input-group-text');
	      
	      toggleBtn.addEventListener('click', function() {
	        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
	        passwordInput.setAttribute('type', type);
	        this.querySelector('i').classList.toggle('bx-show');
	        this.querySelector('i').classList.toggle('bx-hide');
	      });
	    });
	  </script>

	<style>
		/* Customisations compl√©mentaires pour harmoniser avec Sneat */
		.authentication-wrapper {
			background: url('../../assets/img/backgrounds/auth-bg.jpg') no-repeat;
			background-size: cover;
		}

		.authentication-inner {
			max-width: 440px;
			width: 100%;
		}

		.card {
			border: 0;
			box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
			border-radius: 0.5rem;
			overflow: hidden;
			background: rgba(255, 255, 255, 0.98);
			backdrop-filter: blur(10px);
		}

		.btn-primary {
			background-color: var(--primary);
			border-color: var(--primary);
			transition: all 0.3s ease;
		}

		.btn-primary:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 8px rgba(var(--primary-rgb), 0.3);
		}

		.form-control:focus {
			border-color: var(--primary);
			box-shadow: 0 0 0 1px var(--primary);
		}

		.divider-text {
			color: var(--text-muted);
			font-size: 0.85rem;
		}

		.btn-label-google {
			background-color: #fff;
			border: 1px solid #e0e0e0;
			transition: all 0.3s ease;
		}

		.btn-label-google:hover {
			background-color: #f5f5f5;
			transform: translateY(-2px);
		}
	</style>
{% endblock %}
